%\usepackage{unicode-math}  ??
\usepackage{fontspec}

\usepackage[T1]{fontenc}
\usepackage{cmbright} %for math only, will be overwritten. Had issues wit OTF for math?
\gdef\bfdefault{sb}
\gdef\sbdefault{bx} % swap sb with bf

\setmainfont[
  Ligatures = TeX,
%  Numbers = Uppercase,
%  Numbers = Lowercase,
%  Numbers = Oldstyle,
  ItalicFont = CMU Bright Oblique,
  BoldFont = CMU Bright SemiBold,
  BoldItalicFont = CMU Bright SemiBold Oblique,
]{CMU Bright}
\setmonofont[Numbers=Lining]{CMU Typewriter Text Light}


% https://tex.stackexchange.com/questions/204778/difficulty-finding-selecting-cm-bright-using-fontspec
% https://tex.stackexchange.com/questions/358418/using-cmbright-in-xelatex-for-math-and-text
% https://tex.stackexchange.com/questions/25293/replace-integral-sign-in-cmu-bright-with-iwona-while-keeping-proper-position-o
% https://tex.stackexchange.com/questions/572015/using-the-cmbright-package-in-a-limited-range-of-my-document

\DeclareSymbolFont{iwonalargesymbols}{OMX}{iwona}{m}{n}
\DeclareMathSymbol{\intop}{\mathop}{iwonalargesymbols}{"52}

\usepackage[%
  protrusion=true,
  expansion,
  final,
  tracking=true,
  letterspace=120,
  factor=1000,%(/1000), subtle
  stretch=10,%(/1000 %)
  shrink=10
]{microtype}

% upper and lowercase number commands -- not applicable if using serif, I choose uppercase only for simplicity
\def\togunums{}
\def\toglnums{}
\NewDocumentCommand{\lnum}{o}{}
\NewDocumentCommand{\unum}{o}{}

\def\act{}
\def\actext#1{#1}

% why doesn't this work ???
%\usepackage{unicode-math}
%\setmathfont{CMU Bright}
%    \setmathfont[range=\mathup]{CMU Bright Roman}
%    \setmathfont[range=\mathbfup]{CMU Bright SemiBold}
%    \setmathfont[range=\mathbfit]{CMU Bright SemiBold}
%    \setmathfont[range=\mathit]{CMU Bright Oblique}




\gdef\sbseries{\fontseries{sb}\selectfont}

\DeclareRobustCommand{\sm@ller}{%
\dimen@\f@size\p@
\ifdim \dimen@ > 12\p@
\dimen@=0.83333\dimen@
\else
\advance \dimen@ -2\p@
\fi
\math@fontsfalse
\fontsize{\the\dimen@}\z@
\selectfont
}
\newcommand{\textc}[1]{{\sm@ller\uppercase{#1}}}



%\def\sbfCMB#1{\ThisStyle{\setbox0=\hbox{$\SavedStyle#1$}%
%		#1\kern.2pt\kern-\wd0%
%		\raisebox{.1pt}{$\SavedStyle#1$}}}
\newcommand{\sbfCMB}[1]{\textbf{\textit{#1}}}

