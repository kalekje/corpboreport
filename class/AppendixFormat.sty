% ##############################################
% Appendix Formatting
% ##############################################

%%% DEPENDENCIES
% KOMA-script class
% ToC.sty (for ToC skip)

\providecommand*\appendixname{Appendix}
\let\originalappendix\appendix

\providecommand{\cbp@appendixletformat}[1]{\Alph{#1}}
\providecommand{\cbp@appendixsecformat}{}

\renewcommand\appendix{%
	\originalappendix
	% NOTE you cannot use the alphabetized subsections anymore
	%
	\def\thesection{\cbp@appendixletformat{section}}  % restore subsection behaviour (I change it with macro seclettering)
	\def\theHsection{\cbp@appendixletformat{section}}
	\def\thesubsection{\thesection.\arabic{subsection}}  % restore subsection behaviour (I change it with macro seclettering)
	\def\theHsubsection{\thesection.\arabic{subsection}}
	\def\thesubsubsection{\thesubsection.\arabic{subsubsection}}
	\def\theHsubsubsection{\thesubsection.\arabic{subsubsection}}
	%
	\crefalias{section}{appsec}
	%
	\renewcommand\sectionformat{{\cbp@appendixsecformat\appendixname~\thesection\autodot}}
	\renewcommand\sectionlinesformat[4]{%
		\ifstr{##1}{section}
		{\clearpage\vspace*{\sectprespacelength}##3\\*##4}% appendix sections on new page
		{\makebox[0pt][r]{\cbp@secnumsize##3}{##4}}% subsections etc.
	}%

}

%%%%%%%%%%% todo how will thesis react to appendix sections on new apge?/


% DO THIS with \appendix
%	\renewcommand\addsectiontocentry[2]{%
%		\addtocentrydefault{appendixsection}{##1}{##2}%
%	}%


%% this make an entry Appendix A in toc
%\DeclareTOCStyleEntry[
%level=\sectiontocdepth,
%indent=0pt,
%numwidth=2ex,  % does not matter
%dynnumwidth,
%numsep=1.4ex, % uses numsep, but regular entries use numwidth.. might need to adjust
%entrynumberformat=\entrywithprefix{\appendixname},
%entryformat=\large\bfseries,
%beforeskip=\tocsecskip,
%]{section}{appendixsection}
%
%\newcommand\entrywithprefix[2]{#1~#2}



% for lettering, could be used for assignment template, type this \def\thesubsection{\arabic{section} (\alph{subsection})}

